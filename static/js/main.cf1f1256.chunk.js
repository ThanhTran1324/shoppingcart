(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{127:function(e,t,a){e.exports=a(260)},258:function(e,t,a){},260:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(39),i=a.n(o),c=a(7),s=a(8),u=a(9),l=a(10),m=a(33),p=a(21),d=Object(p.a)(),h=a(13),f=a(15),g=a(23),b=a(12),v=a.n(b),E=a(18),y=a(61),w=a.n(y),O=(a(89),a(136),a(137),a(138),w.a.initializeApp({apiKey:"AIzaSyBHrGHhUGCs7Yl7ds_NFE8gffSJuEH0nJU",authDomain:"shoppingcart-f5bc6.firebaseapp.com",databaseURL:"https://shoppingcart-f5bc6.firebaseio.com",projectId:"shoppingcart-f5bc6",storageBucket:"shoppingcart-f5bc6.appspot.com",messagingSenderId:"1082620304721",appId:"1:1082620304721:web:dea202d8cf3595dc7c8770",measurementId:"G-HJ5G4DL8HB"})),N=a(16),j=function(){return function(){var e=Object(E.a)(v.a.mark((function e(t,a){var n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a().auth.userId;case 2:if(n=e.sent,r={},null===n){e.next=9;break}return e.next=7,O.database().ref("/cart/Cart-".concat(n)).once("value").then((function(e){return e.val()}));case 7:r=e.sent,t({type:"CART_FETCH",payload:r});case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},S=a(264),I=a(122),A=a.n(I),C=a(25),T=a.n(C),k=O.database().ref("items"),x=function(e,t){return function(){var a=Object(E.a)(v.a.mark((function a(n){return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t?N.NotificationManager.success("Please Upgrade To Permanent User To Have Better Service !","WelCome Back",2e3):N.NotificationManager.success("Login Success","Success",2e3),a.next=3,n({type:"SIGN_IN",payload:{userId:e,isAnonymous:t}});case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},F=function(){return function(){var e=Object(E.a)(v.a.mark((function e(t,a){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a().auth.isSignedIn){e.next=4;break}return n=null,e.next=4,O.auth().signInAnonymously().catch((function(e){n=e.message,N.NotificationManager.error(n,"Error",2e3)}));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},P=function(){return function(e){A.a.auth().signOut().then((function(){N.NotificationManager.success("","Logout Successful",2e3)})).catch((function(e){console.log(e),N.NotificationManager.error(e.errorMessage,"Error",2e3)})),e({type:"SIGN_OUT"}),e({type:"CART_CLEAN"}),d.push("/shoppingcart")}},L=function(e){return function(){var t=Object(E.a)(v.a.mark((function t(a){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.orderByChild("id").equalTo(e).once("value").then((function(e){return e.val()}));case 2:n=t.sent,a({type:"ITEM_FETCH",payload:n[e]});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},M=function(e,t){return function(a,n){var r=[],o=n().items;switch(e){case"name":r="0"===t?C.sortBy(Object.values(o),[function(e){return e.name}]):C.sortBy(Object.values(o),[function(e){return e.name}]).reverse();break;case"price":"0"===t?(r=Object.values(o).sort((function(e,t){return e.price-t.price})),console.log("low to high")):r=Object.values(o).sort((function(e,t){return e.price-t.price})).reverse();break;case"time":r="0"===t?Object.values(o).sort((function(e,t){return e.createdTime-t.createdTime})):Object.values(o).sort((function(e,t){return e.createdTime-t.createdTime})).reverse();break;default:console.log("no sort")}a({type:"ITEM_SORTED",payload:r})}},_=a(263),R=a(262),U=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).renderSelecter=function(t){t.name;var a=t.input,n=t.label,o=t.option;return r.a.createElement("div",{className:"ui form column"},r.a.createElement("select",Object.assign({},a,{onChange:e.handleChange,className:"ui dropdown"}),r.a.createElement("option",{value:"-1",defaultValue:!0},n),o.map((function(e,t){return r.a.createElement("option",{value:t,key:t},e)}))))},e.handleChange=function(t){t.target&&e.props.itemSorted(t.target.name,t.target.value)},e.handleOnSearch=function(e){},e.renderSearch=function(t){var a=t.input;t.name;return r.a.createElement("form",{onSubmit:e.props.handleSubmit(e.handleOnSearch)},r.a.createElement("div",{className:"ui input ",style:{width:"100%"}},r.a.createElement("input",Object.assign({},a,{type:"text",placeholder:"Search..."}))," ",r.a.createElement("button",{type:"submit",className:"ui button my-search-button"},r.a.createElement("i",{className:"search icon"}))))},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"ui container"},r.a.createElement("div",{className:"ui grid"},r.a.createElement("div",{className:"three column row"},r.a.createElement(_.a,{name:"price",label:"Price",component:this.renderSelecter,option:["Low To High","High To Low"]}),r.a.createElement(_.a,{name:"time",label:"Time",component:this.renderSelecter,option:["Old To New","New To Old"]}),r.a.createElement(_.a,{name:"name",label:"Name",component:this.renderSelecter,option:["A-Z","Z-A"]}))))}}]),a}(n.Component),B=Object(h.b)((function(e){return{items:e.items}}),{itemSorted:M})(U),D=Object(R.a)({form:"SortAndFilterForm"})(B),H=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).renderAdmin=function(t){if(t.userId===e.props.currentUserId)return r.a.createElement("div",null,r.a.createElement("hr",null),r.a.createElement("div",{className:"ui large two buttons"},r.a.createElement(f.a,{to:"/shoppingcart/items/delete/".concat(t.id),className:"ui inverted red button ",style:{whiteSpace:"nowrap"}},r.a.createElement("i",{className:"icon trash alternate"}),"Delete"),r.a.createElement("div",{className:"or"}),r.a.createElement(f.a,{to:"/shoppingcart/items/edit/".concat(t.id),className:"ui inverted blue button "},r.a.createElement("i",{className:"edit icon"}),"Edit")))},e.addToCartHandler=function(t){e.props.signInAsAnonymous(),e.props.cartAdd(t)},e.shortString=function(e,t){return e.length<=t?e:e.slice(0,t)+"..."},e.renderList=function(t){return t.map((function(t){return r.a.createElement("div",{className:"card  ",key:t.id},r.a.createElement("div",{className:"blurring dimmable image ",style:{position:"relative"}},r.a.createElement("img",{className:"imageCartList  ",style:{width:"100%",height:"290px",objectFit:"fill"},src:t.images?t.images:"https://firebasestorage.googleapis.com/v0/b/shoppingcart-f5bc6.appspot.com/o/donut.jpg?alt=media&token=dae66b8a-f9dd-451b-b13d-3ff658e6dd28",alt:"hinh"}),r.a.createElement("button",{style:{position:"absolute",right:"-3px",bottom:"0px"},className:"ui button primary myAddButton",onClick:function(){return e.addToCartHandler(t)}},r.a.createElement("i",{className:"shopping cart icon"}),"Add")),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"header",style:{overflow:"hidden",textTransform:"capitalize",height:"44px"}},e.shortString(t.name,50)),r.a.createElement("div",{className:"meta"},r.a.createElement("span",{className:"price",style:{color:"#FF9200",fontSize:"18px"}},"$",t.price)),r.a.createElement("div",{className:"extra content"},e.renderAdmin(t))))}))},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.props.itemsFetch()}},{key:"render",value:function(){return 0!==Object.keys(this.props.items).length||this.props.sortAndFilterFormValue?r.a.createElement("div",{className:"ui fluid container  ",style:{marginTop:"5px"}},r.a.createElement(D,null),r.a.createElement("div",{className:"ui special cards centered"},this.renderList(Object.values(this.props.items)))):r.a.createElement("div",{className:"ui fluid container "},r.a.createElement("div",{className:"ui segment"},r.a.createElement("div",{className:"ui active dimmer",style:{height:"100vh"}},r.a.createElement("div",{className:"ui massive text loader"},"Loading...")),r.a.createElement("p",null),r.a.createElement("p",null),r.a.createElement("p",null)))}}]),a}(n.Component),V=Object(h.b)((function(e){return{items:e.items,searchform:e.form.SortAndFilterForm,currentUserId:e.auth.userId,isSignedIn:e.auth.isSignedIn}}),{itemsFetch:function(){return function(){var e=Object(E.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.once("value").then((function(e){return e.val()}));case 2:a=e.sent,t({type:"ITEMS_FETCH",payload:a}),t(M("time","1"));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},cartAdd:function(e){return function(){var t=Object(E.a)(v.a.mark((function t(a,n){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=n().auth.userId)){t.next=6;break}return N.NotificationManager.success("You have added a new Item!","Successful!",2e3),t.next=5,O.database().ref("/cart/Cart-".concat(r,"/").concat(e.id)).set(e);case 5:a({type:"CART_ADD",payload:e});case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},signInAsAnonymous:F})(H),G=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return this.props.isSignedIn?this.props.isSignedIn&&this.props.isAnonymous?r.a.createElement(f.a,{to:"/shoppingcart/login/",className:"ui blue google button my-google-login"},r.a.createElement("i",{className:"user secret icon"}),"Upgrade to permanent user"):void 0:r.a.createElement("button",{onClick:this.props.signInAsAnonymous,className:"ui teal google button my-google-login"},r.a.createElement("i",{className:"user secret icon"}),"Login As Guest User")}}]),a}(n.Component),z=Object(h.b)((function(e){return{isSignedIn:e.auth.isSignedIn,isAnonymous:e.auth.isAnonymous}}),{signInAsAnonymous:F})(G),W=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"ui container"},r.a.createElement("div",{className:"ui one column grid"},r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"ui raised segment"},r.a.createElement("p",{className:"ui red ribbon label"},this.props.banner),r.a.createElement("p",null),r.a.createElement("div",null,"Please"," ",r.a.createElement(f.a,{className:"ui teal button",to:"/shoppingcart/login"},"Login"),this.props.content,r.a.createElement(z,null))))))}}]),a}(r.a.Component),q=Object(h.b)(null)(W),Y=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={selectedFile:null,imageLink:null,uploadPercent:0,imageName:null},e.renderInput=function(e){var t=e.input,a=e.meta,n=e.label,o=e.type,i=a.error&&a.touched,c="field ".concat(i?"error":"");return r.a.createElement("div",{className:c},r.a.createElement("label",null,n,"".concat(i?"Requited":"")),r.a.createElement("input",Object.assign({},t,{type:o})))},e.renderImageInput=function(t){t.input,t.meta;var a=t.label,n=t.uploadPercent;return r.a.createElement("div",{className:"field"},r.a.createElement("label",null,a),r.a.createElement("div",null,r.a.createElement("input",{type:"file",onChange:e.fileSelectedHandler}),r.a.createElement("div",{onClick:e.fileUploadHandler,className:"ui labeled button",tabIndex:"0"},r.a.createElement("div",{id:"uploadButton",className:"ui button  "},r.a.createElement("i",{className:"upload icon "})," Upload"),r.a.createElement("p",{className:"ui basic label"},parseFloat(n).toFixed(2),"%"))))},e.convertImage=function(t){var a=new FileReader;a.readAsDataURL(t),a.name=t.name,a.size=t.size,a.onload=function(t){var a=new Image;a.src=t.target.result,a.name=t.target.name,a.size=t.target.size,a.onload=function(){var t=Object(E.a)(v.a.mark((function t(a){var n,r,o,i,c,s,u;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=document.createElement("canvas"),r=600/a.target.width,n.width=600,n.height=a.target.height*r,(o=n.getContext("2d")).drawImage(a.target,0,0,n.width,n.height),i=o.canvas.toDataURL(a.target,"image/jpeg",0),c=atob(i.split(",")[1]),s=[],u=0;u<c.length;u++)s.push(c.charCodeAt(u));e.setState({selectedFile:new Blob([new Uint8Array(s)],{type:"image/jpeg"})});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},e.fileSelectedHandler=function(t){t.target.files.length>0&&(e.setState({imageName:t.target.files[0].name}),e.convertImage(t.target.files[0]),N.NotificationManager.success(" ".concat(parseFloat(t.target.files[0].size/1024/1024).toFixed(2)," MB "),"Converting Your Image",2e3),document.getElementById("submitButton").disabled=!0,document.getElementById("uploadButton").classList.add("green"))},e.fileUploadHandler=function(t){var a=Math.floor(Math.random()*Math.floor(1e3));console.log(a),t.preventDefault();var n=e.state.imageName,r=O.storage().ref("/images/"+a+n).put(e.state.selectedFile);r.on("state_changed",(function(t){e.setState({uploadPercent:t.bytesTransferred/t.totalBytes*100})}),(function(e){console.log(e)}),(function(){r.snapshot.ref.getDownloadURL().then((function(t){e.setState({imageLink:t}),document.getElementById("submitButton").disabled=!1}))}))},e.onSubmit=function(t){var a=new Date;t.createdTime=a.getTime(),t.images=e.state.imageLink,t.price=parseFloat(t.price),e.props.onSubmit(t)},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"ui container"},r.a.createElement("form",{onSubmit:this.props.handleSubmit(this.onSubmit),className:"ui form error"},r.a.createElement(_.a,{name:"name",component:this.renderInput,label:"Name : "}),r.a.createElement(_.a,{name:"price",component:this.renderInput,label:"Price: ",type:"number"}),r.a.createElement(_.a,{name:"images",component:this.renderImageInput,label:"Images: ",uploadPercent:this.state.uploadPercent}),r.a.createElement("button",{id:"submitButton",className:"ui green approve right button"},"Submit")))}}]),a}(n.Component),J=Object(R.a)({form:"ItemForm",validate:function(e){var t={};return e.name||(t.name="Requite Value!"),e.price||(t.price="Requite Value!"),t}})(Y),K=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onSubmit=function(t){e.props.itemCreate(t)},e}return Object(s.a)(a,[{key:"render",value:function(){return this.props.isSignedIn&&!this.props.isAnonymous?r.a.createElement(J,{onSubmit:this.onSubmit}):this.props.isAnonymous?r.a.createElement(q,{banner:"Please Login",content:"You Are Shopping As Guest User!\n        Please Login To Have Better Service."}):r.a.createElement(q,{banner:"Please Login",content:"To Start Selling"})}}]),a}(n.Component),X=Object(h.b)((function(e){return{isSignedIn:e.auth.isSignedIn,isAnonymous:e.auth.isAnonymous}}),{itemCreate:function(e){return function(){var t=Object(E.a)(v.a.mark((function t(a,n){var r,o,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().auth.userId,o=Object(g.a)({},e,{userId:r,id:Object(S.a)()}),O.database().ref("items/".concat(o.id)).set(o),t.next=5,O.database().ref("items/".concat(o.id)).once("value").then((function(e){return e.val()}));case 5:(i=t.sent)&&N.NotificationManager.success("","New Item Created",2e3),a({type:"ITEM_CREATE",payload:i}),d.push("/shoppingcart");case 9:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}})(K),$=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).id=e.props.match.params.id,e.onSubmit=function(t){e.props.itemEdit(e.id,t)},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.props.itemFetch(this.props.match.params.id)}},{key:"render",value:function(){return this.props.item?r.a.createElement(J,{onSubmit:this.onSubmit,initialValues:T.a.pick(this.props.item,"name","price")}):"loading"}}]),a}(n.Component),Z=Object(h.b)((function(e,t){return{item:e.items[t.match.params.id],items:e.items}}),{itemFetch:L,itemEdit:function(e,t){return function(){var a=Object(E.a)(v.a.mark((function a(n){var r;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return O.database().ref("items/".concat(e)).update(t),a.next=4,O.database().ref("items/".concat(e)).once("value").then((function(e){return e.val()}));case 4:r=a.sent,n({type:"ITEM_EDIT",payload:r}),d.push("/shoppingcart");case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})($),Q=function(e){return i.a.createPortal(r.a.createElement("div",{onClick:function(){return d.push("/")},className:"ui dimmer modals visible active"},r.a.createElement("div",{onClick:function(e){return e.stopPropagation()},className:"ui standard modal visible active"},r.a.createElement("div",{className:"header"},e.header),r.a.createElement("div",{className:"content"}," ",e.content),r.a.createElement("div",{className:"actions"},e.actions))),document.querySelector("#modal"))},ee=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).actions=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{to:"/shoppingcart",className:"ui button"},"Cancel"),r.a.createElement("button",{className:"ui button primary",onClick:function(){return e.props.itemDelete(e.props.match.params.id)}},"Delete"))},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.props.itemFetch(this.props.match.params.id)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Q,{actions:this.actions(),header:"Delete Item",content:"Do you want to delete   ".concat(this.props.item?this.props.item.name:"","?")}))}}]),a}(n.Component),te=Object(h.b)((function(e,t){return{item:e.items[t.match.params.id]}}),{itemFetch:L,itemDelete:function(e){return function(){var t=Object(E.a)(v.a.mark((function t(a,n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.database().ref("items/".concat(e));case 2:t.sent.remove().then((function(){var t;n().items[e].images&&(t=n().items[e].images,O.storage().refFromURL(t).delete().then((function(){console.log("image deleted")})).catch((function(){console.log("unable to delete image")}))),N.NotificationManager.success("","Deleted",2e3),a({type:"ITEM_DELETE",payload:e})})).catch((function(e){console.log(e),N.NotificationManager.error(e.errorMessage,"Error",2e3)})),d.push("/shoppingcart");case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}})(ee),ae=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,"view")}}]),a}(n.Component),ne=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).componentDidMount=Object(E.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return O.analytics(),t.next=3,O.auth().onAuthStateChanged((function(t){t&&(e.props.signIn(t.uid,t.isAnonymous),e.props.cartFetch())}));case 3:case"end":return t.stop()}}),t)}))),e.renderCartBadge=function(){var t="0";return e.props.cart&&(t=Object.values(e.props.cart).length),r.a.createElement("div",null,"Cart ",r.a.createElement("i",{className:" icon shopping cart"}),r.a.createElement("span",{className:"badge"}," ( ".concat(t,")")))},e.renderAuthButton=function(){return e.props.isSignedIn&&!e.props.isAnonymous?r.a.createElement(f.a,{to:"/shoppingcart",onClick:e.props.signOut,className:"item "},"Logout"):r.a.createElement(f.a,{to:"/shoppingcart/login/",className:"item"},"Login")},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"ui container"},r.a.createElement("div",{className:"ui teal four item inverted menu"},r.a.createElement(f.a,{to:"/shoppingcart/",className:" item"},"Home"),r.a.createElement(f.a,{to:"/shoppingcart/items/new",className:"item"},"Create Item"),r.a.createElement(f.a,{id:"cart",to:"/shoppingcart/cart/view",className:"item"},this.renderCartBadge()),this.renderAuthButton()))}}]),a}(r.a.Component),re=Object(h.b)((function(e){return{cart:e.cart,isSignedIn:e.auth.isSignedIn,isAnonymous:e.auth.isAnonymous}}),{cartFetch:j,signIn:x,signOut:P})(ne),oe=(a(258),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).renderInput=function(e){var t=e.input,a=e.meta,n=e.label,o=e.type,i=a.error&&a.touched,c="field textbox ".concat(i?"error":"");return r.a.createElement("div",{className:c},r.a.createElement("label",null,n,"".concat(i?a.error:"")),r.a.createElement("input",Object.assign({},t,{type:o,autoComplete:t.name})))},n.onSubmit=function(e){if(n.state.showVerifyPassword)if(n.props.isSignedIn&&n.props.isAnonymous){var t=O.auth.EmailAuthProvider.credential(e.email,e.password);O.auth().currentUser.linkWithCredential(t).then((function(e){N.NotificationManager.success("Anonymous account successfully upgraded ","Successful!",2e3),d.push("/shoppingcart")}),(function(e){N.NotificationManager.error(e.message,"Error!",2e3)}))}else O.auth().createUserWithEmailAndPassword(e.email,e.password).then((function(e){d.push("/shoppingcart")})).catch((function(e){var t=e.code;n.setState({error:t})}));else O.auth().signInWithEmailAndPassword(e.email,e.password).then((function(e){n.setState({error:"Login Success"}),d.push("/shoppingcart")})).catch((function(e){var t=e.code;n.setState({error:t})}))},n.renderErrorFromServer=function(){switch(n.state.error){case"auth/user-not-found":case"auth/wrong-password":return r.a.createElement("div",null,"Wrong User or Password");default:return r.a.createElement("div",null,n.state.error)}},n.googleLogin=function(){var e=new w.a.auth.GoogleAuthProvider;O.auth().signInWithPopup(e).then((function(e){e.user&&d.push("/shoppingcart")})).catch((function(e){}))},n.renderVerifyPassword=function(){if(n.state.showVerifyPassword)return r.a.createElement(_.a,{type:"password",name:"verifyPassword",label:"Verify Password",component:n.renderInput})},n.renderForgetPassword=function(){if(!n.state.showVerifyPassword)return r.a.createElement(f.a,{to:"/shoppingcart/forgotpassword",className:"my_forgot_password_text"},"Forgot Your Password")},n.SignInSignUpSwitch=function(e){n.setState({showVerifyPassword:e})},n.state={error:"",showVerifyPassword:!1},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return console.log(O),r.a.createElement("div",{className:"ui  container "},r.a.createElement("div",{className:"login-container"},r.a.createElement("div",{className:"login-box"},r.a.createElement("div",{className:"ui equal width center aligned padded grid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:" green column",onClick:function(){return e.SignInSignUpSwitch(!1)},style:{cursor:"pointer"}},"Log in"),r.a.createElement("div",{className:"blue column",onClick:function(){return e.SignInSignUpSwitch(!0)},style:{cursor:"pointer"}},"Sign Up"))),r.a.createElement("form",{onSubmit:this.props.handleSubmit(this.onSubmit),className:"ui form error"},r.a.createElement(_.a,{name:"email",label:"Email",component:this.renderInput}),r.a.createElement(_.a,{type:"password",name:"password",label:"Password",component:this.renderInput}),this.renderForgetPassword(),this.renderVerifyPassword(),this.renderErrorFromServer(),r.a.createElement("button",{type:"submit",className:"ui approve  button  my-login-button ".concat(this.state.showVerifyPassword?"blue":"green")},this.state.showVerifyPassword?"Sign Up":"Log In"))),r.a.createElement("button",{onClick:this.googleLogin,className:"ui red google button my-google-login"},r.a.createElement("i",{className:"google icon"}),"Google Login")))}}]),a}(n.Component)),ie=Object(h.b)((function(e){return{isSignedIn:e.auth.isSignedIn,isAnonymous:e.auth.isAnonymous}}),{signIn:x,signOut:P})(oe),ce=Object(R.a)({form:"userForm",validate:function(e){var t={};return e.email?e.email.match(/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/)||(t.email=" Wrong Format !"):t.email=" Requite Value !",e.password||(t.password=" Requite Value !"),e.verifyPassword!==e.password&&(t.verifyPassword=" : Wrong Verify Password"),e.verifyPassword||(t.verifyPassword=" Requite Value !"),t}})(ie),se=a(125);function ue(e){return r.a.createElement(se.PayPalButton,{paypalOptions:{clientId:"AYI5Th6t7An5aFVx5rkUvvbo68XhT-ol3iXLVdyBbkiTzYUo9RaNZJoCcpVUKv3fGNQnGXzpF3J_Bd4a",intent:"capture"},buttonStyles:{layout:"vertical",shape:"rect"},amount:e.price})}var le=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={total:0},e.renderList=function(t){return t.map((function(t){return r.a.createElement("div",{key:t.id,className:"item"},r.a.createElement("div",{style:{color:"#FF9200",float:"right"}},"/$",t.price),r.a.createElement("img",{className:"ui avatar image",src:t.images?t.images:"https://firebasestorage.googleapis.com/v0/b/shoppingcart-f5bc6.appspot.com/o/donut.jpg?alt=media&token=dae66b8a-f9dd-451b-b13d-3ff658e6dd28",alt:t.name}),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"header",style:{color:"#0167C0",textTransform:"capitalize"}},t.name),r.a.createElement("button",{onClick:function(){return e.props.cartRemove(t.id)},className:"ui  mini  button "},"Remove")))}))},e.renderTotal=function(){var t=0;return null!==e.props.cart&&Object.values(e.props.cart).map((function(e){return t+=parseInt(e.price)})),r.a.createElement("span",{style:{color:"#FF9200",fontSize:"30px"}}," $",t)},e.countTotal=function(){var t=0;return Object.values(e.props.cart).map((function(e){return t+=parseInt(e.price)})),t},e.renderWarningPanelForlAnonymoust=function(){if(e.props.isAnonymous)return r.a.createElement(q,{banner:"Please Login",content:"You Are Shopping As Guest User!\n          Please Login To Have Better Service."})},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.props.cartFetch()}},{key:"render",value:function(){return this.props.isSignedIn?null!==this.props.cart?r.a.createElement("div",{className:"ui container",style:{justifyContent:"center"}},this.renderWarningPanelForlAnonymoust(),r.a.createElement("div",{className:"ui celled massive list"},this.renderList(Object.values(this.props.cart))),r.a.createElement("div",{className:"ui container ",style:{width:"500px"}}," ",r.a.createElement("h3",null,"Subtotal (",Object.keys(this.props.cart).length," item):",this.renderTotal()),0!==this.countTotal()?r.a.createElement(ue,{description:"item cui bap",price:this.countTotal()}):"")):r.a.createElement("div",null,"Your Cart is empty !"):r.a.createElement(q,{banner:"Please Login",content:"To Start Shopping"})}}]),a}(n.Component),me=Object(h.b)((function(e){return{cart:e.cart,isSignedIn:e.auth.isSignedIn,isAnonymous:e.auth.isAnonymous}}),{cartRemove:function(e){return function(){var t=Object(E.a)(v.a.mark((function t(a,n){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(r=n().auth.userId)&&(O.database().ref("/cart/Cart-".concat(r,"/")).child(e).remove(),a({type:"CART_REMOVE",payload:e}));case 2:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},cartFetch:j})(le),pe=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).componentWillMount=function(){},e.content=function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Enter the email address for your account we'll email you a link to reset your password."),r.a.createElement("p",null),r.a.createElement("form",{className:"ui form"},r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Email address: "),r.a.createElement("input",{type:"text",id:"email",autoComplete:"off",style:{width:"300px"}}),r.a.createElement("button",{onClick:e.handleSubmit,className:"ui interted teal button ",style:{marginLeft:"5px"}},"Sent Reset Password Email"),r.a.createElement("h2",{id:"output"}," "))),r.a.createElement("p",null))},e.handleSubmit=function(e){e.preventDefault();var t=O.auth(),a=document.getElementById("email").value;t.sendPasswordResetEmail(a).then((function(){console.log("email sent"),document.getElementById("output").innerHTML="Email has been sent!"})).catch((function(e){document.getElementById("output").innerHTML=e}))},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(q,{banner:"Forgot your password ? ",content:this.content()})}}]),a}(n.Component),de=(a(259),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"ui fluid container"},r.a.createElement(N.NotificationContainer,null),r.a.createElement(m.b,{history:d},r.a.createElement("div",null,r.a.createElement(re,null),r.a.createElement(m.c,null,r.a.createElement(m.a,{path:"/shoppingcart/",exact:!0,component:V}),r.a.createElement(m.a,{path:"/shoppingcart/items/new",exact:!0,component:X}),r.a.createElement(m.a,{path:"/shoppingcart/items/edit/:id",exact:!0,component:Z}),r.a.createElement(m.a,{path:"/shoppingcart/items/delete/:id",exact:!0,component:te}),r.a.createElement(m.a,{path:"/shoppingcart/items/view/:id",exact:!0,component:ae}),r.a.createElement(m.a,{path:"/shoppingcart/cart/view",exact:!0,component:me}),r.a.createElement(m.a,{path:"/shoppingcart/login",exact:!0,component:ce}),r.a.createElement(m.a,{path:"/shoppingcart/forgotpassword",exact:!0,component:pe})))))}}]),a}(r.a.Component)),he=a(14),fe=a(126),ge={isSignedIn:null,userId:null,isAnonymous:!1},be=a(265),ve=a(32),Ee={},ye=Object(he.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGN_IN":return Object(g.a)({},e,{isSignedIn:!0,isAnonymous:t.payload.isAnonymous,userId:t.payload.userId});case"SIGN_OUT":return Object(g.a)({},e,{isSignedIn:!1,isAnonymous:!1,userId:null});default:return e}},form:be.a,items:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ITEM_CREATE":case"ITEM_EDIT":case"ITEM_FETCH":return Object(g.a)({},e,Object(ve.a)({},t.payload.id,t.payload));case"ITEMS_FETCH":return Object(g.a)({},T.a.mapKeys(t.payload,"id"));case"ITEM_DELETE":return T.a.omit(e,t.payload);case"ITEM_SORTED":return T.a.mapKeys(t.payload,"id");default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CART_ADD":return Object(g.a)({},e,Object(ve.a)({},t.payload.id,t.payload));case"CART_FETCH":return Object(g.a)({},e,{},T.a.mapKeys(t.payload,"id"));case"CART_REMOVE":return T.a.omit(e,t.payload);case"CART_CLEAN":return null;default:return e}}}),we=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||he.d,Oe=Object(he.e)(ye,we(Object(he.a)(fe.a)));i.a.render(r.a.createElement(h.a,{store:Oe},r.a.createElement(de,null)),document.querySelector("#root"))}},[[127,1,2]]]);
//# sourceMappingURL=main.cf1f1256.chunk.js.map