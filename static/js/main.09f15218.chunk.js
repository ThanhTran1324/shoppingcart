(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{124:function(e,t,n){e.exports=n.p+"static/media/thanh_logo.f9b63344.jpg"},127:function(e,t,n){e.exports=n(265)},258:function(e,t,n){},260:function(e,t,n){},261:function(e,t,n){},262:function(e,t,n){},263:function(e,t,n){},265:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(31),c=n.n(i),o=n(6),s=n(7),u=n(8),l=n(9),m=n(14),d=n(34),p=n(21),f=Object(p.b)(),h=n(10),g=n(23),b=n(11),v=n.n(b),E=n(17),y=n(61),N=n.n(y),w=(n(89),n(136),n(137),n(139),N.a.initializeApp({apiKey:"AIzaSyBHrGHhUGCs7Yl7ds_NFE8gffSJuEH0nJU",authDomain:"shoppingcart-f5bc6.firebaseapp.com",databaseURL:"https://shoppingcart-f5bc6.firebaseio.com",projectId:"shoppingcart-f5bc6",storageBucket:"shoppingcart-f5bc6.appspot.com",messagingSenderId:"1082620304721",appId:"1:1082620304721:web:dea202d8cf3595dc7c8770",measurementId:"G-HJ5G4DL8HB"})),O=n(16),S=function(e){return function(){var t=Object(E.a)(v.a.mark((function t(n,a){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=a().auth.userId)){t.next=8;break}return t.next=4,w.database().ref("/cart/Cart-".concat(r,"/").concat(e.id)).set(e);case 4:n({type:"CART_ADD",payload:e}),O.NotificationManager.success("You have added a new Item!","Successful!",2e3),t.next=9;break;case 8:O.NotificationManager.error("Please Login !","Warning",2e3);case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},I=function(){return function(){var e=Object(E.a)(v.a.mark((function e(t,n){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n().auth.userId;case 2:if(a=e.sent,r={},null===a){e.next=9;break}return e.next=7,w.database().ref("/cart/Cart-".concat(a)).once("value").then((function(e){return e.val()}));case 7:r=e.sent,t({type:"CART_FETCH",payload:r});case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},j=function(){return function(e){e({type:"CART_CLEAN"})}},C=n(269),A=n(121),k=n.n(A),T=n(25),x=n.n(T),P=w.database().ref("items"),L=function(e,t){return function(){var n=Object(E.a)(v.a.mark((function n(a){return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t?O.NotificationManager.success("Your Shopping Cart Items Will Be Added When You Create a New Account.","Anonymous Login Success",5e3):O.NotificationManager.success("Login Success","Success",2e3),n.next=3,a({type:"SIGN_IN",payload:{userId:e,isAnonymous:t}});case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},F=function(){return function(){var e=Object(E.a)(v.a.mark((function e(t,n){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n().auth.isSignedIn){e.next=5;break}return a=null,e.next=4,w.auth().signInAnonymously().catch((function(e){a=e.message,O.NotificationManager.error(a,"Error",2e3)}));case 4:f.push("/");case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},M=function(){return function(e){k.a.auth().signOut().then((function(){O.NotificationManager.success("","Logout Successful",2e3)})).catch((function(e){console.log(e),O.NotificationManager.error(e.errorMessage,"Error",2e3)})),e({type:"SIGN_OUT"}),e((function(e){e({type:"CART_CLEAN"})})),f.push("/")}},R=function(e){return function(){var t=Object(E.a)(v.a.mark((function t(n){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.orderByChild("id").equalTo(e).once("value").then((function(e){return e.val()}));case 2:a=t.sent,n({type:"ITEM_FETCH",payload:a[e]});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},_=function(e){return function(t){w.storage().refFromURL(e).delete().then((function(){console.log("image deleted")})).catch((function(){console.log("unable to delete image")}))}},D=function(e,t){return function(n,a){var r=[],i=a().items;switch(e){case"name":r="0"===t?T.sortBy(Object.values(i),[function(e){return e.name}]):T.sortBy(Object.values(i),[function(e){return e.name}]).reverse();break;case"price":r="0"===t?Object.values(i).sort((function(e,t){return e.price-t.price})):Object.values(i).sort((function(e,t){return e.price-t.price})).reverse();break;case"time":r="0"===t?Object.values(i).sort((function(e,t){return e.createdTime-t.createdTime})):Object.values(i).sort((function(e,t){return e.createdTime-t.createdTime})).reverse()}n({type:"ITEM_SORTED",payload:r})}},B=n(268),V=n(267),U=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).renderSelecter=function(t){t.name;var n=t.input,a=t.label,i=t.option;return r.a.createElement("div",{className:"ui four column form noPadding"},r.a.createElement("select",Object.assign({},n,{onChange:e.handleChange,className:"ui dropdown"}),r.a.createElement("option",{value:"-1",defaultValue:!0},a),i.map((function(e,t){return r.a.createElement("option",{value:t,key:t},e)}))))},e.handleChange=function(t){t.target&&e.props.itemSorted(t.target.name,t.target.value)},e.handleOnSearch=function(t){e.props.itemSearch(t.search)},e.renderSearch=function(t){var n=t.input;t.name;return r.a.createElement("div",{className:"ui  ui four column form noPadding"},r.a.createElement("form",{onSubmit:e.props.handleSubmit(e.handleOnSearch)},r.a.createElement("div",{className:"ui search"},r.a.createElement("div",{className:"ui icon input"},r.a.createElement("input",Object.assign({type:"text",placeholder:"Search..."},n)),r.a.createElement("i",{className:"search icon"})))))},e}return Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"ui grid container myFilterContainer",style:{marginTop:"10px",marginBottom:"10px"}},r.a.createElement("div",{className:"four column row ",style:{backgroundColor:"rgba(208, 214, 214, 0.514)",borderRadius:"5px"}},r.a.createElement(B.a,{name:"search",component:this.renderSearch,initialValues:{search:"hello"}}),r.a.createElement(B.a,{name:"price",label:"Price",component:this.renderSelecter,option:["Low To High","High To Low"]}),r.a.createElement(B.a,{name:"time",label:"Time",component:this.renderSelecter,option:["Old To New","New To Old"]}),r.a.createElement(B.a,{name:"name",label:"Name",component:this.renderSelecter,option:["A-Z","Z-A"]})))}}]),n}(a.Component),H=Object(h.b)((function(e){return{items:e.items}}),{itemSorted:D,itemSearch:function(e){return function(t){t(void 0===e?{type:"ITEMSEARCH",payload:{isSearching:!1}}:{type:"ITEMSEARCH",payload:{searchKey:e,isSearching:!0}})}}})(U),q=Object(V.a)({form:"SortAndFilterForm"})(H),G=function(){return r.a.createElement("div",{className:"ui active active dimmer"},r.a.createElement("div",{className:"ui large text loader"},"Loading ..."))},W=function(e,t){return e.length<=t?e:e.slice(0,t)+"..."},K=(n(258),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).renderAdmin=function(t){if(t.userId===e.props.currentUserId)return r.a.createElement("div",null,r.a.createElement("hr",null),r.a.createElement("div",{className:"ui large two buttons"},r.a.createElement(m.b,{to:"/items/delete/".concat(t.id),className:"ui inverted red button "},r.a.createElement("i",{className:"icon trash alternate"}),"Delete"),r.a.createElement("div",{className:"or"}),r.a.createElement(m.b,{to:"/items/edit/".concat(t.id),className:"ui inverted blue button "},r.a.createElement("i",{className:"edit icon"}),"Edit")))},e.addToCartHandler=function(t){e.props.isSignedIn?e.props.cartAdd(t):f.push("/loginprompt")},e.renderList=function(t){return 0===t.length?r.a.createElement("h1",null,"Sorry, We don't have the Item you need !!!"):t.map((function(t){return r.a.createElement("div",{className:"card  ",key:t.id},r.a.createElement("div",{className:"myImageContainer",style:{backgroundColor:"white"}},r.a.createElement(m.b,{to:"/item/view/".concat(t.id)},r.a.createElement("img",{className:"imageCartList  myImageCardList",src:t.images?t.images:"https://firebasestorage.googleapis.com/v0/b/shoppingcart-f5bc6.appspot.com/o/donut.jpg?alt=media&token=dae66b8a-f9dd-451b-b13d-3ff658e6dd28",alt:"hinh"})),r.a.createElement("button",{className:"ui button primary myAddButton",onClick:function(){return e.addToCartHandler(t)}},r.a.createElement("i",{className:"shopping cart icon"}),"Add")),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"header myItemName"},r.a.createElement(m.b,{to:"/item/view/".concat(t.id)},W(t.name,50))),r.a.createElement("div",{className:"meta"},r.a.createElement("p",{className:"myPrice"},"$",t.price)),r.a.createElement("div",{className:"extra content"},e.renderAdmin(t))))}))},e.myFilter=function(t){return e.props.isSearching?t.filter((function(t){return t.name.toLowerCase().includes(e.props.searchKey.toLowerCase())})):t},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.props.itemsFetch()}},{key:"render",value:function(){return 0===Object.keys(this.props.items).length?r.a.createElement(G,null):r.a.createElement("div",{className:"ui fluid container "},r.a.createElement(q,{initialValues:{search:this.props.searchKey}}),r.a.createElement("div",{className:"ui special cards centered"},this.renderList(this.myFilter(Object.values(this.props.items)))),r.a.createElement("button",{onClick:function(){return f.push("/shoppingcart/items/new")}},"Testing"))}}]),n}(a.Component)),Y=Object(h.b)((function(e){return{items:e.items,searchform:e.form.SortAndFilterForm,currentUserId:e.auth.userId,isSignedIn:e.auth.isSignedIn,isSearching:e.filter.isSearching,searchKey:e.filter.searchKey}}),{itemsFetch:function(){return function(){var e=Object(E.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.once("value").then((function(e){return e.val()}));case 2:n=e.sent,t({type:"ITEMS_FETCH",payload:n}),t(D("time","1"));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},cartAdd:S,signInAsAnonymous:F})(K),z=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={},a}return Object(s.a)(n,[{key:"render",value:function(){return this.props.isSignedIn?this.props.isAnonymous?r.a.createElement(m.b,{to:"/login/",className:"ui blue google button my-google-login"},r.a.createElement("i",{className:"user secret icon"}),"Upgrade to permanent user"):void 0:r.a.createElement("button",{onClick:this.props.signInAsAnonymous,className:"ui teal google button my-google-login"},r.a.createElement("i",{className:"user secret icon",style:{fontSize:"25px",color:"red"}}),"Anonymous Login")}}]),n}(a.Component),J=Object(h.b)((function(e){return{isSignedIn:e.auth.isSignedIn,isAnonymous:e.auth.isAnonymous}}),{signInAsAnonymous:F})(z),X=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"ui container"},r.a.createElement("div",{className:"ui one column grid"},r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"ui raised segment"},r.a.createElement("p",{className:"ui red ribbon label"},this.props.banner),r.a.createElement("p",null),r.a.createElement("div",null,"Please"," ",r.a.createElement(m.b,{className:"ui teal button",to:"/login"},"Login"),this.props.content,r.a.createElement(J,null))))))}}]),n}(r.a.Component),$=Object(h.b)(null)(X),Z=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={selectedFile:null,imageLink:null,uploadPercent:0,imageName:null},e.componentDidMount=function(){e.props.initialValues&&e.setState({imageLink:e.props.initialValues.images})},e.renderInput=function(e){var t=e.input,n=e.meta,a=e.label,i=e.type,c=n.error&&n.touched,o="field ".concat(c?"error":"");return r.a.createElement("div",{className:o},r.a.createElement("label",null,a," :","".concat(c?"Requited":"")),r.a.createElement("input",Object.assign({},t,{type:i,placeholder:a})))},e.renderPreImage=function(){if(e.props.initialValues)return r.a.createElement("div",null,r.a.createElement("img",{className:"ui medium centered rounded image ",src:e.props.initialValues.images,alt:"Item"}),r.a.createElement("p",null," Click Choose File to update new image :"))},e.renderImageInput=function(t){t.input,t.meta;var n=t.label,a=t.uploadPercent;return r.a.createElement("div",{className:"field"},r.a.createElement("label",null,n," :"),e.renderPreImage(),r.a.createElement("div",null,r.a.createElement("input",{type:"file",onChange:e.fileSelectedHandler}),r.a.createElement("div",{onClick:e.fileUploadHandler,className:"ui labeled button",tabIndex:"0"},r.a.createElement("div",{id:"uploadButton",className:"ui button  "},r.a.createElement("i",{className:"upload icon "})," Upload"),r.a.createElement("p",{className:"ui basic label"},parseFloat(a).toFixed(2),"%"))))},e.convertImage=function(t){var n=new FileReader;n.readAsDataURL(t),n.name=t.name,n.size=t.size,n.onload=function(t){var n=new Image;n.src=t.target.result,n.name=t.target.name,n.size=t.target.size,n.onload=function(){var t=Object(E.a)(v.a.mark((function t(n){var a,r,i,c,o,s,u;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(a=document.createElement("canvas"),r=600/n.target.width,a.width=600,a.height=n.target.height*r,(i=a.getContext("2d")).drawImage(n.target,0,0,a.width,a.height),c=i.canvas.toDataURL(n.target,"image/jpeg",0),o=atob(c.split(",")[1]),s=[],u=0;u<o.length;u++)s.push(o.charCodeAt(u));e.setState({selectedFile:new Blob([new Uint8Array(s)],{type:"image/jpeg"})});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},e.fileSelectedHandler=function(t){t.target.files.length>0&&(e.setState({imageName:t.target.files[0].name}),e.convertImage(t.target.files[0]),O.NotificationManager.success(" ".concat(parseFloat(t.target.files[0].size/1024/1024).toFixed(2)," MB "),"Converting Your Image",2e3),document.getElementById("submitButton").disabled=!0,document.getElementById("uploadButton").classList.add("green"))},e.fileUploadHandler=function(t){var n=Math.floor(Math.random()*Math.floor(1e3));t.preventDefault();var a=e.state.imageName,r=w.storage().ref("/images/"+n+a).put(e.state.selectedFile);r.on("state_changed",(function(t){e.setState({uploadPercent:t.bytesTransferred/t.totalBytes*100})}),(function(e){console.log(e)}),(function(){r.snapshot.ref.getDownloadURL().then((function(t){e.setState({imageLink:t}),document.getElementById("submitButton").disabled=!1}))}))},e.onSubmit=function(t){var n=new Date;t.createdTime=n.getTime(),t.images=e.state.imageLink,t.price=parseFloat(t.price),e.props.onSubmit(t)},e}return Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"ui  container segment"},r.a.createElement("form",{onSubmit:this.props.handleSubmit(this.onSubmit),className:"ui form error"},r.a.createElement(B.a,{name:"name",component:this.renderInput,label:"Name"}),r.a.createElement(B.a,{name:"price",component:this.renderInput,label:"Price",type:"number"}),r.a.createElement(B.a,{name:"images",component:this.renderImageInput,label:"Images",uploadPercent:this.state.uploadPercent}),r.a.createElement("button",{id:"submitButton",className:"ui green approve right button"},"Submit")))}}]),n}(a.Component),Q=Object(V.a)({form:"ItemForm",validate:function(e){var t={};return e.name||(t.name="Requite Value!"),e.price||(t.price="Requite Value!"),t}})(Z),ee=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).onSubmit=function(t){e.props.itemCreate(t)},e}return Object(s.a)(n,[{key:"render",value:function(){return this.props.isSignedIn&&!this.props.isAnonymous?r.a.createElement(Q,{onSubmit:this.onSubmit}):this.props.isAnonymous?r.a.createElement($,{banner:"Please Login",content:"You Are Shopping As Guest User!\n        Please Create An Account To Have Better Service."}):r.a.createElement($,{banner:"Please Login",content:"To Start Selling"})}}]),n}(a.Component),te=Object(h.b)((function(e){return{isSignedIn:e.auth.isSignedIn,isAnonymous:e.auth.isAnonymous}}),{itemCreate:function(e){return function(){var t=Object(E.a)(v.a.mark((function t(n,a){var r,i,c;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().auth.userId,i=Object(g.a)({},e,{userId:r,id:Object(C.a)()}),w.database().ref("items/".concat(i.id)).set(i),t.next=5,w.database().ref("items/".concat(i.id)).once("value").then((function(e){return e.val()}));case 5:(c=t.sent)&&O.NotificationManager.success("","New Item Created",2e3),n({type:"ITEM_CREATE",payload:c}),f.push("/");case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}})(ee),ne=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).id=e.props.match.params.id,e.onSubmit=function(t){t.images!==e.props.item.images&&e.props.itemImageDelete(e.props.item.images),e.props.itemEdit(e.id,t)},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.props.itemFetch(this.props.match.params.id)}},{key:"render",value:function(){return this.props.item?r.a.createElement(Q,{onSubmit:this.onSubmit,initialValues:x.a.pick(this.props.item,"name","price","images")}):r.a.createElement(G,null)}}]),n}(a.Component),ae=Object(h.b)((function(e,t){return{item:e.items[t.match.params.id],items:e.items}}),{itemFetch:R,itemEdit:function(e,t){return function(){var n=Object(E.a)(v.a.mark((function n(a){var r;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return w.database().ref("items/".concat(e)).update(t),n.next=4,w.database().ref("items/".concat(e)).once("value").then((function(e){return e.val()}));case 4:r=n.sent,a({type:"ITEM_EDIT",payload:r}),f.push("/");case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},itemImageDelete:_})(ne),re=function(e){return c.a.createPortal(r.a.createElement("div",{onClick:function(){return f.goBack()},className:"ui dimmer modals visible active"},r.a.createElement("div",{onClick:function(e){return e.stopPropagation()},className:"ui standard modal visible active"},r.a.createElement("div",{className:"header"},e.header),r.a.createElement("div",{className:"content"}," ",e.content),r.a.createElement("div",{className:"actions"},e.actions))),document.querySelector("#modal"))},ie=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).actions=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.b,{to:"/",className:"ui button"},"Cancel"),r.a.createElement("button",{className:"ui button primary",onClick:function(){return e.props.itemDelete(e.props.match.params.id)}},"Delete"))},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.props.itemFetch(this.props.match.params.id)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(re,{actions:this.actions(),header:"Delete Item",content:"Do you want to delete   ".concat(this.props.item?this.props.item.name:"","?")}))}}]),n}(a.Component),ce=Object(h.b)((function(e,t){return{item:e.items[t.match.params.id]}}),{itemFetch:R,itemDelete:function(e){return function(){var t=Object(E.a)(v.a.mark((function t(n,a){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.database().ref("items/".concat(e));case 2:t.sent.remove().then((function(){a().items[e].images&&n(_(a().items[e].images)),O.NotificationManager.success("","Item Deleted",2e3),n({type:"ITEM_DELETE",payload:e})})).catch((function(e){console.log(e),O.NotificationManager.error(e.errorMessage,"Error",2e3)})),f.push("/");case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}})(ie),oe=(n(260),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).addToCartHandler=function(t){e.props.isSignedIn?(e.props.cartAdd(t),f.goBack()):f.push("/loginprompt")},e.actions=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(){return f.goBack()},className:"ui button"},"Cancel"),r.a.createElement("button",{className:"ui button primary",onClick:function(){return e.addToCartHandler(e.props.item)}},"Add To Cart"))},e.renderItemInfo=function(e){return r.a.createElement("div",{className:"ui grid"},r.a.createElement("div",{className:"six wide column"},r.a.createElement("img",{className:"ui large image",src:e.images,alt:e.name+"photo"})),r.a.createElement("div",{className:"ten wide column"},r.a.createElement("p",{className:"myItemViewPrice"},"$ ",e.price)," & FREE Shipping",r.a.createElement("h2",{style:{margin:0}},"Product Information"),r.a.createElement("p",{className:"myItemInfo"},"Lorem ipsum, dolor sit amet consectetur adipisicing elit. Nihil expedita dolores, debitis animi sequi ullam blanditiis. Et tenetur, temporibus beatae dolores illo accusantium excepturi recusandae rerum laborum necessitatibus deserunt.")))},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.props.itemFetch(this.props.match.params.id)}},{key:"render",value:function(){if(this.props.item){var e=this.props.item;return r.a.createElement("div",null,r.a.createElement(re,{actions:this.actions(),header:e.name,content:this.renderItemInfo(e)}))}return r.a.createElement(G,null)}}]),n}(a.Component)),se=Object(h.b)((function(e,t){return{item:e.items[t.match.params.id],isSignedIn:e.auth.isSignedIn}}),{itemFetch:R,cartAdd:S})(oe),ue=n(124),le=n.n(ue),me=(n(261),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).componentDidMount=Object(E.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return w.analytics(),t.next=3,w.auth().onAuthStateChanged((function(t){t&&(e.props.signIn(t.uid,t.isAnonymous),e.props.cartFetch())}));case 3:case"end":return t.stop()}}),t)}))),e.renderCartBadge=function(){var t="0";return e.props.cart&&(t=Object.values(e.props.cart).length),r.a.createElement("div",null,"Cart ",r.a.createElement("i",{className:" icon shopping cart"}),r.a.createElement("span",{className:"badge"}," ( ".concat(t,")")))},e.renderAuthButton=function(){return e.props.isSignedIn&&!e.props.isAnonymous?r.a.createElement(m.b,{to:"/",onClick:e.props.signOut,className:"item "},"Logout"):r.a.createElement(m.b,{to:"/login/",className:"item"},"Login")},e}return Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"myNavBar"},r.a.createElement("div",{className:"ui teal four item inverted menu myNavBarLink"},r.a.createElement(m.b,{to:"/",className:" item"},r.a.createElement("img",{src:le.a,alt:"thanh_logo",className:"  thanhLogo"}),"Home"),r.a.createElement(m.b,{to:"/items/new",className:"item"},"Create Item"),r.a.createElement(m.b,{id:"cart",to:"/cart/view",className:"item"},this.renderCartBadge()),this.renderAuthButton()))}}]),n}(r.a.Component)),de=Object(h.b)((function(e){return{cart:e.cart,isSignedIn:e.auth.isSignedIn,isAnonymous:e.auth.isAnonymous}}),{cartFetch:I,signIn:L,signOut:M})(me),pe=(n(262),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).renderInput=function(e){var t=e.input,n=e.meta,a=e.label,i=e.type,c=n.error&&n.touched,o="field textbox ".concat(c?"error":"");return r.a.createElement("div",{className:o},r.a.createElement("label",null,a,"".concat(c?n.error:"")),r.a.createElement("input",Object.assign({},t,{type:i,autoComplete:t.name})))},a.onSubmit=function(e){if(a.state.showVerifyPassword)if(a.props.isSignedIn&&a.props.isAnonymous){var t=w.auth.EmailAuthProvider.credential(e.email,e.password);w.auth().currentUser.linkWithCredential(t).then((function(e){O.NotificationManager.success("Anonymous account successfully upgraded ","Successful!",2e3),f.push("/")}),(function(e){O.NotificationManager.error(e.message,"Error!",2e3)}))}else w.auth().createUserWithEmailAndPassword(e.email,e.password).then((function(e){f.push("/")})).catch((function(e){var t=e.code;a.setState({error:t})}));else w.auth().signInWithEmailAndPassword(e.email,e.password).then((function(e){a.setState({error:"Login Success"}),f.push("/")})).catch((function(e){var t=e.code;a.setState({error:t})}))},a.renderErrorFromServer=function(){switch(a.state.error){case"auth/user-not-found":case"auth/wrong-password":return r.a.createElement("div",null,"Wrong User or Password");default:return r.a.createElement("div",null,a.state.error)}},a.googleLogin=function(){var e=new N.a.auth.GoogleAuthProvider;w.auth().signInWithPopup(e).then((function(e){console.log(e),f.push("/")})).catch((function(e){O.NotificationManager.error(e.message,"Error!",2e3)}))},a.renderVerifyPassword=function(){if(a.state.showVerifyPassword)return r.a.createElement(B.a,{type:"password",name:"verifyPassword",label:"Verify Password",component:a.renderInput})},a.renderForgetPassword=function(){if(!a.state.showVerifyPassword)return r.a.createElement(m.b,{to:"/forgotpassword",className:"my_forgot_password_text"},"Forgot Your Password")},a.SignInSignUpSwitch=function(e){a.setState({showVerifyPassword:e})},a.state={error:"",showVerifyPassword:!1},a}return Object(s.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"ui  container "},r.a.createElement("div",{className:"login-container"},r.a.createElement("div",{className:"login-box"},r.a.createElement("div",{className:"ui equal width center aligned padded grid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:" green column",onClick:function(){return e.SignInSignUpSwitch(!1)},style:{cursor:"pointer"}},"Log in"),r.a.createElement("div",{className:"blue column",onClick:function(){return e.SignInSignUpSwitch(!0)},style:{cursor:"pointer"}},"Sign Up"))),r.a.createElement("form",{onSubmit:this.props.handleSubmit(this.onSubmit),className:"ui form error"},r.a.createElement(B.a,{name:"email",label:"Email",component:this.renderInput}),r.a.createElement(B.a,{type:"password",name:"password",label:"Password",component:this.renderInput}),this.renderForgetPassword(),this.renderVerifyPassword(),this.renderErrorFromServer(),r.a.createElement("button",{type:"submit",className:"ui approve  button  my-login-button ".concat(this.state.showVerifyPassword?"blue":"green")},this.state.showVerifyPassword?"Sign Up":"Log In"))),r.a.createElement("button",{onClick:this.googleLogin,className:"ui red google button my-google-login"},r.a.createElement("i",{className:"google icon"}),"Google Login")))}}]),n}(a.Component)),fe=Object(h.b)((function(e){return{isSignedIn:e.auth.isSignedIn,isAnonymous:e.auth.isAnonymous}}),{signIn:L,signOut:M})(pe),he=Object(V.a)({form:"userForm",validate:function(e){var t={};return e.email?e.email.match(/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/)||(t.email=" Wrong Format !"):t.email=" Requite Value !",e.password||(t.password=" Requite Value !"),e.verifyPassword!==e.password&&(t.verifyPassword=" : Wrong Verify Password"),e.verifyPassword||(t.verifyPassword=" Requite Value !"),t}})(fe),ge=n(125),be=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={},a}return Object(s.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement(ge.PayPalButton,{amount:this.props.price,currency:"USD",catchError:function(e){console.log(e)},onSuccess:function(t,n){return e.props.transactionSuccess(t,n),fetch("/paypal-transaction-complete",{method:"post",body:JSON.stringify({orderId:n.orderID})})},options:{clientId:"AYI5Th6t7An5aFVx5rkUvvbo68XhT-ol3iXLVdyBbkiTzYUo9RaNZJoCcpVUKv3fGNQnGXzpF3J_Bd4a"}})}}]),n}(a.Component),ve=Object(h.b)(null,{cartClean:j,transactionSuccess:function(e,t){return function(t){f.push("/"),O.NotificationManager.success("Transaction Finished","Thank You ".concat(e.payer.name.given_name),3e3),t((function(e){e({type:"CART_CLEAN"})})),t(function(){var e=Object(E.a)(v.a.mark((function e(t,n){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=n().auth.userId)){e.next=4;break}return e.next=4,w.database().ref("/cart/Cart-".concat(a)).remove();case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}}})(be),Ee=(n(263),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).renderList=function(e){return e.map((function(e){return r.a.createElement("div",{key:e.id,className:"three column row itemContainerCart"},r.a.createElement("div",{className:"four wide column "},r.a.createElement("img",{className:"ui tiny image centered",src:e.images?e.images:"https://firebasestorage.googleapis.com/v0/b/shoppingcart-f5bc6.appspot.com/o/donut.jpg?alt=media&token=dae66b8a-f9dd-451b-b13d-3ff658e6dd28",alt:e.name})),r.a.createElement("div",{className:"eight wide column "},r.a.createElement("span",{className:"myItemNameCart "},W(e.name,55))),r.a.createElement("div",{className:"four wide column"},r.a.createElement("div",{className:"myCartViewPrice "},"/$",e.price),r.a.createElement("button",{onClick:function(){return a.props.cartRemove(e.id)},className:"ui  mini  button myRemoveButton  "},"Remove")),r.a.createElement("hr",null))}))},a.countTotal=function(e){if(e){var t=0;return Object.values(e).map((function(e){return t+=parseFloat(e.price)})),t.toFixed(2)}return 0},a.renderWarningPanelForlAnonymoust=function(){if(a.props.isAnonymous)return r.a.createElement($,{banner:"Please Login",content:"You Are Shopping As Guest User!\n          Please Create An Account To Have Better Service."})},a.renderTotalAndPaypal=function(e){var t=a.countTotal(e);if(t>0)return r.a.createElement("div",{className:"ui container totalAmountAndPaypalContainer"},r.a.createElement("h3",null,"Subtotal (",Object.keys(e).length," item):",r.a.createElement("span",{className:"myTotalAmount"}," $",t)),r.a.createElement("div",{className:"myPaypalContainer"},r.a.createElement(ve,{description:"Paypal Buttons",price:t})))},a.state={},a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.props.cartFetch()}},{key:"render",value:function(){return this.props.isSignedIn&&this.props.cart?Object.values(this.props.cart).length>0?r.a.createElement("div",{className:"ui container segment",style:{justifyContent:"center"}},this.renderWarningPanelForlAnonymoust(),r.a.createElement("div",{className:"ui grid"},this.renderList(Object.values(this.props.cart))),this.renderTotalAndPaypal(this.props.cart)):r.a.createElement("div",null,r.a.createElement("h1",{style:{textAlign:"center"}},"Your Cart is empty !")):r.a.createElement($,{banner:"Please Login",content:"To Start Shopping"})}}]),n}(a.Component)),ye=Object(h.b)((function(e){return{cart:e.cart,isSignedIn:e.auth.isSignedIn,isAnonymous:e.auth.isAnonymous}}),{cartRemove:function(e){return function(){var t=Object(E.a)(v.a.mark((function t(n,a){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(r=a().auth.userId)&&(w.database().ref("/cart/Cart-".concat(r,"/")).child(e).remove(),n({type:"CART_REMOVE",payload:e}));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},cartFetch:I})(Ee),Ne=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).componentWillMount=function(){},e.content=function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Enter the email address for your account we'll email you a link to reset your password."),r.a.createElement("p",null),r.a.createElement("form",{className:"ui form"},r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Email address: "),r.a.createElement("input",{type:"text",id:"email",autoComplete:"off",style:{width:"300px"}}),r.a.createElement("button",{onClick:e.handleSubmit,className:"ui interted teal button ",style:{marginLeft:"5px"}},"Sent Reset Password Email"),r.a.createElement("h2",{id:"output"}," "))),r.a.createElement("p",null))},e.handleSubmit=function(e){e.preventDefault();var t=w.auth(),n=document.getElementById("email").value;t.sendPasswordResetEmail(n).then((function(){console.log("email sent"),document.getElementById("output").innerHTML="Email has been sent!"})).catch((function(e){document.getElementById("output").innerHTML=e}))},e}return Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement($,{banner:"Forgot your password ? ",content:this.content()})}}]),n}(a.Component),we=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).actions=function(){return r.a.createElement("div",{className:"ui equal width grid"},r.a.createElement("div",{className:"equal width row"},r.a.createElement("div",{className:"column"},r.a.createElement("button",{onClick:function(){return f.push("/login")},className:"ui teal google button my-google-login"},r.a.createElement("i",{className:"user icon",style:{fontSize:"25px",color:"green"}}),"Login")),r.a.createElement("div",{className:"column"},r.a.createElement(J,null))))},e.content=function(){return r.a.createElement("h4",{style:{textAlign:"center"}},"Do you want to Login ?")},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(re,{actions:this.actions(),header:"Login Requite: ",content:this.content()}))}}]),n}(a.Component),Oe=Object(h.b)(null,{signInAsAnonymous:F})(we),Se=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{style:{textAlign:"center",marginTop:"100px"}},r.a.createElement("h1",null,"Error 404"),r.a.createElement(m.b,{to:"/"},r.a.createElement("h1",null,"Home Page")))}}]),n}(a.Component),Ie=(n(264),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"ui  container fluid"},r.a.createElement(O.NotificationContainer,null),r.a.createElement(m.a,{history:f},r.a.createElement("div",null,r.a.createElement(de,null),r.a.createElement(d.c,null,r.a.createElement(d.a,{path:"/",exact:!0,component:Y}),r.a.createElement(d.a,{path:"/items/new",exact:!0,component:te}),r.a.createElement(d.a,{path:"/items/edit/:id",exact:!0,component:ae}),r.a.createElement(d.a,{path:"/items/delete/:id",exact:!0,component:ce}),r.a.createElement(d.a,{path:"/item/view/:id",exact:!0,component:se}),r.a.createElement(d.a,{path:"/loginprompt",exact:!0,component:Oe}),r.a.createElement(d.a,{path:"/cart/view",exact:!0,component:ye}),r.a.createElement(d.a,{path:"/login",exact:!0,component:he}),r.a.createElement(d.a,{path:"/forgotpassword",exact:!0,component:Ne}),r.a.createElement(d.a,{component:Se})))))}}]),n}(r.a.Component)),je=n(15),Ce=n(126),Ae=n(270),ke=n(33),Te={},xe={isSignedIn:null,userId:null,isAnonymous:!1},Pe=Object(je.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGN_IN":return Object(g.a)({},e,{isSignedIn:!0,isAnonymous:t.payload.isAnonymous,userId:t.payload.userId});case"SIGN_OUT":return Object(g.a)({},e,{isSignedIn:!1,isAnonymous:!1,userId:null});default:return e}},form:Ae.a,items:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ITEM_CREATE":case"ITEM_EDIT":case"ITEM_FETCH":return Object(g.a)({},e,Object(ke.a)({},t.payload.id,t.payload));case"ITEMS_FETCH":return Object(g.a)({},x.a.mapKeys(t.payload,"id"));case"ITEM_DELETE":return x.a.omit(e,t.payload);case"ITEM_SORTED":return x.a.mapKeys(t.payload,"id");default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CART_ADD":return Object(g.a)({},e,Object(ke.a)({},t.payload.id,t.payload));case"CART_FETCH":return Object(g.a)({},e,{},x.a.mapKeys(t.payload,"id"));case"CART_REMOVE":return x.a.omit(e,t.payload);case"CART_CLEAN":return{};default:return e}},filter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isSearching:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ITEMSEARCH":return{isSearching:t.payload.isSearching,searchKey:t.payload.searchKey};default:return e}}}),Le=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||je.d,Fe=Object(je.e)(Pe,Le(Object(je.a)(Ce.a)));c.a.render(r.a.createElement(h.a,{store:Fe},r.a.createElement(Ie,null)),document.querySelector("#root"))}},[[127,1,2]]]);
//# sourceMappingURL=main.09f15218.chunk.js.map